<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Финансовый помощник</title>
    <!-- Подключение Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Настройка шрифта Inter -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #1e293b;
            margin: 0;
            padding: 0;
            transition: background-color 0.3s ease;
        }
        .container {
            max-width: 600px;
            margin: auto;
            padding: 24px;
        }
        .card {
            background-color: white;
            border-radius: 1.5rem; /* Более округлые углы */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* Более мягкая тень */
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem; /* Более округлые углы */
            transition: border-color 0.2s ease;
        }
        .form-input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem; /* Более округлые углы */
            font-weight: 600; /* Более жирный шрифт */
            transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
        }
        .btn-primary {
            background-color: #2563eb;
            color: white;
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.3);
        }
        .btn-primary:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(37, 99, 235, 0.4);
        }
        .btn-danger {
            background-color: #ef4444;
            color: white;
            box-shadow: 0 4px 6px rgba(239, 68, 68, 0.3);
        }
        .btn-danger:hover {
            background-color: #dc2626;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(239, 68, 68, 0.4);
        }
        .notification-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #10b981;
            color: white;
            padding: 15px 25px;
            border-radius: 0.75rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            pointer-events: none;
        }
        .notification-container.show {
            opacity: 1;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            transition: opacity 0.3s ease;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 500px;
        }
        .tab-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            color: #4b5563;
            transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
        }
        .tab-btn.active {
            background-color: white;
            color: #2563eb;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .tab-btn:hover:not(.active) {
            background-color: #e5e7eb;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">

    <div class="container pb-20">
        <!-- Заголовок приложения -->
        <h1 class="text-3xl font-bold text-center my-8 text-blue-800">Финансовый помощник</h1>

        <!-- Контейнер для основного контента -->
        <div id="content-container">
            <!-- Блок с вкладками -->
            <div class="flex justify-center bg-gray-200 p-2 rounded-xl mb-4">
                <button id="main-tab" class="tab-btn active">Главная</button>
                <button id="income-tab" class="tab-btn">Доходы</button>
                <button id="debts-tab" class="tab-btn">Долги</button>
            </div>

            <!-- Главная вкладка -->
            <div id="main-content">
                <!-- Карточка с балансом -->
                <div class="card bg-gradient-to-r from-blue-600 to-blue-500 text-white flex flex-col items-center transform scale-100 hover:scale-[1.01] transition-transform">
                    <h2 class="text-xl font-bold">Остаток на следующий месяц</h2>
                    <p class="text-5xl font-extrabold mt-2 tracking-wide" id="remaining-balance">0 ₽</p>
                    <div class="flex justify-between w-full mt-4 text-sm font-semibold">
                        <span>Прогноз доходов: <span id="projected-income">0 ₽</span></span>
                        <span>Прогноз расходов: <span id="total-expenses">0 ₽</span></span>
                    </div>
                </div>

                <!-- Карточка с предстоящими платежами -->
                <div class="card">
                    <h2 class="text-xl font-bold mb-4">Предстоящие платежи</h2>
                    <div id="upcoming-payments" class="space-y-4">
                        <p class="text-gray-500 text-center">Нет предстоящих платежей.</p>
                    </div>
                </div>
            </div>

            <!-- Вкладка Доходы -->
            <div id="income-content" class="hidden">
                <div class="card">
                    <h2 class="text-xl font-bold mb-4">Добавить доход</h2>
                    <form id="income-form" class="space-y-4">
                        <input type="hidden" id="income-id">
                        <input type="text" id="income-title" class="form-input" placeholder="Название (например, Зарплата)" required>
                        <textarea id="income-description" class="form-input" placeholder="Описание (необязательно)"></textarea>
                        <input type="number" id="income-amount" class="form-input" placeholder="Сумма" required min="0">
                        <select id="income-frequency" class="form-input" required>
                            <option value="">Выберите частоту</option>
                            <option value="bi-weekly">Раз в 2 недели</option>
                            <option value="monthly">Ежемесячно</option>
                            <option value="once">Однократно</option>
                        </select>
                        <input type="date" id="income-date" class="form-input" required>
                        <button type="submit" class="btn btn-primary w-full" id="save-income-btn">Сохранить</button>
                    </form>
                </div>
                <div class="card mt-4">
                    <h2 class="text-xl font-bold mb-4">Мои доходы</h2>
                    <div id="income-list" class="space-y-4">
                        <p class="text-gray-500 text-center">Список доходов пуст.</p>
                    </div>
                </div>
            </div>

            <!-- Вкладка Долги -->
            <div id="debts-content" class="hidden">
                <div class="card">
                    <h2 class="text-xl font-bold mb-4">Добавить долг</h2>
                    <form id="debt-form" class="space-y-4">
                        <input type="hidden" id="debt-id">
                        <input type="text" id="debt-title" class="form-input" placeholder="Название (например, Ипотека)" required>
                        <textarea id="debt-description" class="form-input" placeholder="Описание (необязательно)"></textarea>
                        <input type="number" id="debt-amount" class="form-input" placeholder="Сумма" required min="0">
                        <select id="debt-category" class="form-input" required>
                            <option value="">Выберите категорию</option>
                            <option value="mortgage">Ипотека</option>
                            <option value="loan">Кредит</option>
                            <option value="credit_card">Кредитная карта</option>
                            <option value="person">Людям</option>
                            <option value="utility">Счета/Коммуналка</option>
                            <option value="other">Другое</option>
                        </select>
                        <select id="debt-frequency" class="form-input" required>
                            <option value="">Выберите частоту</option>
                            <option value="bi-weekly">Раз в 2 недели</option>
                            <option value="monthly">Ежемесячно</option>
                            <option value="quarterly">Ежеквартально</option>
                            <option value="annually">Ежегодно</option>
                            <option value="once">Однократно</option>
                        </select>
                        <input type="date" id="debt-due-date" class="form-input" required>
                        <button type="submit" class="btn btn-primary w-full" id="save-debt-btn">Сохранить</button>
                    </form>
                </div>
                <div class="card mt-4">
                    <h2 class="text-xl font-bold mb-4">Мои долги</h2>
                    <div id="debt-list" class="space-y-4">
                        <p class="text-gray-500 text-center">Список долгов пуст.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно для подтверждения -->
    <div id="confirm-modal" class="modal hidden">
        <div class="modal-content">
            <p class="text-lg font-bold mb-4">Вы уверены?</p>
            <p id="confirm-message" class="mb-6 text-gray-700">Вы действительно хотите удалить эту запись?</p>
            <div class="flex justify-end space-x-4">
                <button id="confirm-cancel-btn" class="btn bg-gray-300 text-gray-800">Отмена</button>
                <button id="confirm-ok-btn" class="btn btn-danger">Удалить</button>
            </div>
        </div>
    </div>

    <!-- Общий контейнер для уведомлений -->
    <div id="notification-container" class="notification-container">
        <span id="notification-message"></span>
    </div>
    
    <!-- Spinner for loading state -->
    <div id="loading-spinner" class="fixed inset-0 bg-gray-200/50 flex items-center justify-center hidden">
        <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
    </div>

    <script>
        // --- Global variables and DOM elements ---
        const mainContent = document.getElementById('main-content');
        const incomeContent = document.getElementById('income-content');
        const debtsContent = document.getElementById('debts-content');
        const mainTab = document.getElementById('main-tab');
        const incomeTab = document.getElementById('income-tab');
        const debtsTab = document.getElementById('debts-tab');
        const incomeForm = document.getElementById('income-form');
        const debtForm = document.getElementById('debt-form');
        const incomeList = document.getElementById('income-list');
        const debtList = document.getElementById('debt-list');
        const confirmModal = document.getElementById('confirm-modal');
        const confirmMessage = document.getElementById('confirm-message');
        const confirmCancelBtn = document.getElementById('confirm-cancel-btn');
        const confirmOkBtn = document.getElementById('confirm-ok-btn');
        const notificationContainer = document.getElementById('notification-container');
        const notificationMessage = document.getElementById('notification-message');
        const loadingSpinner = document.getElementById('loading-spinner');
        
        // --- Data variables, stored in Local Storage for simplicity ---
        let allIncome = [];
        let allDebts = [];
        let upcomingPaymentsData = [];

        // --- UI and tab management ---
        function showTab(tabId) {
            loadingSpinner.classList.add('hidden');
            mainContent.classList.add('hidden');
            incomeContent.classList.add('hidden');
            debtsContent.classList.add('hidden');

            mainTab.classList.remove('active');
            incomeTab.classList.remove('active');
            debtsTab.classList.remove('active');

            if (tabId === 'main-content') {
                mainContent.classList.remove('hidden');
                mainTab.classList.add('active');
                renderMainDashboard();
            } else if (tabId === 'income-content') {
                incomeContent.classList.remove('hidden');
                incomeTab.classList.add('active');
            } else if (tabId === 'debts-content') {
                debtsContent.classList.remove('hidden');
                debtsTab.classList.add('active');
            }
        }

        mainTab.addEventListener('click', () => showTab('main-content'));
        incomeTab.addEventListener('click', () => showTab('income-content'));
        debtsTab.addEventListener('click', () => showTab('debts-content'));

        // --- Confirmation modal ---
        function showConfirmModal(message, onConfirm) {
            confirmMessage.textContent = message;
            confirmModal.classList.remove('hidden');
            confirmOkBtn.onclick = () => {
                onConfirm();
                confirmModal.classList.add('hidden');
            };
            confirmCancelBtn.onclick = () => {
                confirmModal.classList.add('hidden');
            };
        }

        // --- Notifications ---
        function showNotification(message, duration = 3000) {
            notificationMessage.textContent = message;
            notificationContainer.classList.add('show');
            setTimeout(() => {
                notificationContainer.classList.remove('show');
            }, duration);
        }

        // --- Calculation logic ---
        function calculateRemainingBalance() {
            const today = new Date();
            const nextMonthStart = new Date(today.getFullYear(), today.getMonth() + 1, 1);
            const nextMonthEnd = new Date(today.getFullYear(), today.getMonth() + 2, 0);

            let totalIncome = 0;
            let totalExpenses = 0;
            upcomingPaymentsData = [];

            // Calculate income for the next month
            allIncome.forEach(item => {
                let itemIncome = 0;
                let payDate = new Date(item.payDate);
                
                if (item.frequency === 'once' && payDate >= nextMonthStart && payDate <= nextMonthEnd) {
                    itemIncome = item.amount;
                } else if (item.frequency === 'monthly') {
                    itemIncome = item.amount;
                } else if (item.frequency === 'bi-weekly') {
                    // A more precise calculation for bi-weekly payments
                    let currentPaymentDate = new Date(item.payDate);
                    while (currentPaymentDate < nextMonthEnd) {
                        if (currentPaymentDate >= nextMonthStart) {
                            itemIncome += item.amount;
                        }
                        currentPaymentDate.setDate(currentPaymentDate.getDate() + 14);
                    }
                }
                if (itemIncome > 0) {
                     upcomingPaymentsData.push({ title: item.title, amount: itemIncome, date: item.payDate, type: 'income' });
                }
                totalIncome += itemIncome;
            });
            
            // Calculate debts for the next month
            allDebts.forEach(item => {
                let itemExpense = 0;
                let dueDate = new Date(item.dueDate);

                if (item.frequency === 'once' && dueDate >= nextMonthStart && dueDate <= nextMonthEnd) {
                    itemExpense = item.amount;
                } else if (item.frequency === 'monthly') {
                    itemExpense = item.amount;
                } else if (item.frequency === 'bi-weekly') {
                    let currentDueDate = new Date(item.dueDate);
                    while (currentDueDate < nextMonthEnd) {
                         if (currentDueDate >= nextMonthStart) {
                            itemExpense += item.amount;
                        }
                        currentDueDate.setDate(currentDueDate.getDate() + 14);
                    }
                } else if (item.frequency === 'quarterly') {
                    if ((nextMonthStart.getMonth() - dueDate.getMonth()) % 3 === 0) {
                        itemExpense = item.amount;
                    }
                } else if (item.frequency === 'annually') {
                    if (nextMonthStart.getMonth() === dueDate.getMonth()) {
                        itemExpense = item.amount;
                    }
                }
                 if (itemExpense > 0) {
                     upcomingPaymentsData.push({ title: item.title, amount: itemExpense, date: item.dueDate, type: 'debt' });
                }
                totalExpenses += itemExpense;
            });
            
            document.getElementById('projected-income').textContent = `${totalIncome.toLocaleString('ru-RU')} ₽`;
            document.getElementById('total-expenses').textContent = `${totalExpenses.toLocaleString('ru-RU')} ₽`;
            
            const remaining = totalIncome - totalExpenses;
            document.getElementById('remaining-balance').textContent = `${remaining.toLocaleString('ru-RU')} ₽`;
            
            renderUpcomingPayments();
        }
        
        function renderMainDashboard() {
            calculateRemainingBalance();
        }

        function renderUpcomingPayments() {
            const container = document.getElementById('upcoming-payments');
            container.innerHTML = '';
            if (upcomingPaymentsData.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center">Нет предстоящих платежей.</p>';
            } else {
                upcomingPaymentsData.sort((a, b) => new Date(a.date) - new Date(b.date));
                upcomingPaymentsData.forEach(payment => {
                    const isIncome = payment.type === 'income';
                    const iconSvg = isIncome 
                        ? `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20v-8m0 0V4m0 8l-4-4m4 4l4-4m-4 8l-4 4m4-4l4 4"/><circle cx="12" cy="12" r="10"/></svg>`
                        : `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 4v8m0 0v8m0-8l-4 4m4-4l4 4m-4-8l-4-4m4 4l4-4"/><circle cx="12" cy="12" r="10"/></svg>`;

                    const paymentEl = document.createElement('div');
                    paymentEl.className = `flex justify-between items-center bg-gray-50 p-4 rounded-xl shadow-sm border-l-4 ${isIncome ? 'border-green-500' : 'border-red-500'}`;
                    paymentEl.innerHTML = `
                        <div class="flex items-center space-x-3">
                            ${iconSvg}
                            <div>
                                <p class="font-bold">${payment.title}</p>
                                <p class="text-sm text-gray-500">${new Date(payment.date).toLocaleDateString('ru-RU')}</p>
                            </div>
                        </div>
                        <p class="font-semibold ${isIncome ? 'text-green-600' : 'text-red-600'}">${isIncome ? '+' : '-'}${payment.amount.toLocaleString('ru-RU')} ₽</p>
                    `;
                    container.appendChild(paymentEl);
                });
            }
        }

        // --- Data storage functions (using Local Storage) ---
        function saveDataToLocalStorage() {
            try {
                localStorage.setItem('allIncome', JSON.stringify(allIncome));
                localStorage.setItem('allDebts', JSON.stringify(allDebts));
            } catch (e) {
                console.error("Failed to save data to Local Storage", e);
            }
        }

        function loadDataFromLocalStorage() {
            try {
                const incomeData = localStorage.getItem('allIncome');
                const debtsData = localStorage.getItem('allDebts');
                
                if (incomeData) {
                    allIncome = JSON.parse(incomeData);
                }
                if (debtsData) {
                    allDebts = JSON.parse(debtsData);
                }
            } catch (e) {
                console.error("Failed to load data from Local Storage", e);
                // If an error occurs, reset data
                allIncome = [];
                allDebts = [];
            }
        }

        // --- Data functions (income) ---
        function saveIncome(data) {
            if (data.id) {
                // Update existing record
                const index = allIncome.findIndex(item => item.id === data.id);
                if (index !== -1) {
                    allIncome[index] = data;
                    showNotification('Доход обновлен!');
                }
            } else {
                // Add new record
                const newId = Date.now().toString();
                allIncome.push({ id: newId, ...data });
                showNotification('Доход добавлен!');
            }
            incomeForm.reset();
            document.getElementById('income-id').value = '';
            saveDataToLocalStorage();
            renderIncomeList();
            calculateRemainingBalance();
        }

        function deleteIncome(id) {
            showConfirmModal('Вы уверены, что хотите удалить этот доход?', () => {
                allIncome = allIncome.filter(item => item.id !== id);
                showNotification('Доход удален!');
                saveDataToLocalStorage();
                renderIncomeList();
                calculateRemainingBalance();
            });
        }

        // --- Data functions (debts) ---
        function saveDebt(data) {
            if (data.id) {
                // Update existing record
                const index = allDebts.findIndex(item => item.id === data.id);
                if (index !== -1) {
                    allDebts[index] = data;
                    showNotification('Долг обновлен!');
                }
            } else {
                // Add new record
                const newId = Date.now().toString();
                allDebts.push({ id: newId, ...data });
                showNotification('Долг добавлен!');
            }
            debtForm.reset();
            document.getElementById('debt-id').value = '';
            saveDataToLocalStorage();
            renderDebtList();
            calculateRemainingBalance();
        }

        function deleteDebt(id) {
             showConfirmModal('Вы уверены, что хотите удалить этот долг?', () => {
                allDebts = allDebts.filter(item => item.id !== id);
                showNotification('Долг удален!');
                saveDataToLocalStorage();
                renderDebtList();
                calculateRemainingBalance();
            });
        }

        // --- List rendering ---
        function renderIncomeList() {
            incomeList.innerHTML = '';
            if (allIncome.length === 0) {
                incomeList.innerHTML = '<p class="text-gray-500 text-center">Список доходов пуст.</p>';
                return;
            }
            allIncome.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'bg-white p-4 rounded-xl shadow-sm flex justify-between items-center';
                itemEl.innerHTML = `
                    <div>
                        <p class="font-bold">${item.title}</p>
                        <p class="text-sm text-gray-500">${item.description || 'Без описания'}</p>
                        <p class="font-semibold text-green-600 mt-1">${item.amount.toLocaleString('ru-RU')} ₽</p>
                    </div>
                    <div class="flex space-x-2">
                        <button class="text-blue-500 hover:text-blue-700 font-bold" onclick="editIncome('${item.id}')">Изменить</button>
                        <button class="text-red-500 hover:text-red-700 font-bold" onclick="deleteIncome('${item.id}')">Удалить</button>
                    </div>
                `;
                incomeList.appendChild(itemEl);
            });
        }

        function renderDebtList() {
            debtList.innerHTML = '';
            if (allDebts.length === 0) {
                debtList.innerHTML = '<p class="text-gray-500 text-center">Список долгов пуст.</p>';
                return;
            }
            allDebts.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'bg-white p-4 rounded-xl shadow-sm flex justify-between items-center';
                itemEl.innerHTML = `
                    <div>
                        <p class="font-bold">${item.title}</p>
                        <p class="text-sm text-gray-500">${item.description || 'Без описания'}</p>
                        <p class="font-semibold text-red-600 mt-1">${item.amount.toLocaleString('ru-RU')} ₽</p>
                    </div>
                    <div class="flex space-x-2">
                        <button class="text-blue-500 hover:text-blue-700 font-bold" onclick="editDebt('${item.id}')">Изменить</button>
                        <button class="text-red-500 hover:text-red-700 font-bold" onclick="deleteDebt('${item.id}')">Удалить</button>
                    </div>
                `;
                debtList.appendChild(itemEl);
            });
        }

        // --- Populating forms for editing ---
        window.editIncome = function(id) {
            const item = allIncome.find(i => i.id === id);
            if (item) {
                document.getElementById('income-id').value = item.id;
                document.getElementById('income-title').value = item.title;
                document.getElementById('income-description').value = item.description || '';
                document.getElementById('income-amount').value = item.amount;
                document.getElementById('income-frequency').value = item.frequency;
                document.getElementById('income-date').value = item.payDate;
                showTab('income-content');
            }
        }

        window.editDebt = function(id) {
            const item = allDebts.find(d => d.id === id);
            if (item) {
                document.getElementById('debt-id').value = item.id;
                document.getElementById('debt-title').value = item.title;
                document.getElementById('debt-description').value = item.description || '';
                document.getElementById('debt-amount').value = item.amount;
                document.getElementById('debt-category').value = item.category;
                document.getElementById('debt-frequency').value = item.frequency;
                document.getElementById('debt-due-date').value = item.dueDate;
                showTab('debts-content');
            }
        }

        // --- Form event listeners ---
        incomeForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const incomeData = {
                id: document.getElementById('income-id').value || null,
                title: document.getElementById('income-title').value,
                description: document.getElementById('income-description').value,
                amount: parseFloat(document.getElementById('income-amount').value),
                frequency: document.getElementById('income-frequency').value,
                payDate: document.getElementById('income-date').value,
            };
            saveIncome(incomeData);
        });

        debtForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const debtData = {
                id: document.getElementById('debt-id').value || null,
                title: document.getElementById('debt-title').value,
                description: document.getElementById('debt-description').value,
                amount: parseFloat(document.getElementById('debt-amount').value),
                category: document.getElementById('debt-category').value,
                frequency: document.getElementById('debt-frequency').value,
                dueDate: document.getElementById('debt-due-date').value,
            };
            saveDebt(debtData);
        });

        // --- Initialization on page load ---
        window.addEventListener('load', () => {
            loadDataFromLocalStorage();
            renderIncomeList();
            renderDebtList();
            calculateRemainingBalance();
        });
        
    </script>
</body>
</html>
